<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>KÖKÖ Admin</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
		integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/fontawesome.min.css"
		integrity="sha512-8jdwayz5n8F2cnW26l9vpV6+yGOcRAqz6HTu+DQ3FtVIAts2gTdlFZOGpYhvBMXkWEgxPN3Y22UWyZXuDowNLA=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<style>
		#app {
			min-height: 100vh;
		}
	</style>
</head>

<body>
	<div id="app" class="d-flex flex-column">
		<nav class="navbar navbar-expand navbar-light bg-light border-bottom shadow-sm mb-4">
			<div class="container-fluid">
				<a class="navbar-brand" href="#"><strong>KÖKÖ</strong> Admin</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
					aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" href="https://kozertheto.k-monitor.hu/README.pdf"
								target="_blank">Dokumentáció</a>
						</li>
					</ul>
					<ul class="navbar-nav ms-auto">
						<a class="btn btn-success" :href="publicUrl">
							KÖKÖ
							<i class="fas fa-external-link-alt ms-1"></i>
						</a>
					</ul>
				</div>
			</div>
		</nav>

		<div class="container py-5">
			<div class="row row-cols-1 row-cols-md-2 g-4">
				<div class="col">
					<div class="card shadow-sm">
						<h5 class="card-header d-flex align-items-center">Költségvetés</h5>
						<div class="card-body">
							<p>A feltöltött fájl neve mindegy, a szerveren levő <code>budget.xlsx</code> fájl lesz
								felülírva vele.</p>
							<p>Excel 2007-O365 (<code>*.xlsx</code>) fájlt kell feltölteni, melynek szerkezete követi a
								dokumentációban írtakat.</p>
						</div>
						<div class="card-footer d-flex">
							<a class="btn btn-outline-secondary" href="input/budget.xlsx" target="_blank">
								<i class="fas fa-fw fa-download"></i>
								Letöltés
							</a>
							<button class="btn btn-primary ms-auto" @click="browseBudget">
								<i class="fas fa-fw fa-upload"></i>
								Feltöltés
							</button>
							<input name="budget" ref="budgetFile" style="display:none" type="file"
								@change="uploadBudget" />
						</div>
					</div>
				</div>
				<div class="col">
					<div class="card shadow-sm">
						<h5 class="card-header d-flex align-items-center">Konfiguráció</h5>
						<div class="card-body">
							<p>A feltöltött fájl neve mindegy, a szerveren levő <code>config.xlsx</code> fájl lesz
								felülírva vele.</p>
							<p>Excel 2007-O365 (<code>*.xlsx</code>) fájlt kell feltölteni, melynek szerkezete követi a
								dokumentációban írtakat.</p>
						</div>
						<div class="card-footer d-flex">
							<a class="btn btn-outline-secondary" href="input/config.xlsx" target="_blank">
								<i class="fas fa-fw fa-download"></i>
								Letöltés
							</a>
							<button class="btn btn-primary ms-auto" @click="browseConfig">
								<i class="fas fa-fw fa-upload"></i>
								Feltöltés
							</button>
							<input name="config" ref="configFile" style="display:none" type="file"
								@change="uploadConfig" />
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.14/vue.min.js"
		integrity="sha512-XdUZ5nrNkVySQBnnM5vzDqHai823Spoq1W3pJoQwomQja+o4Nw0Ew1ppxo5bhF2vMug6sfibhKWcNJsG8Vj9tg=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>
		const app = new Vue({
			el: '#app',
			data: {
				budgetFile: null,
				publicUrl: 'https://kozertheto.k-monitor.hu/'
			},
			methods: {
				browseBudget() {
					this.$refs.budgetFile.click()
				},
				browseConfig() {
					this.$refs.configFile.click()
				},
				async upload(endpoint, field, ref) {
					const body = new FormData();
					body.append(field, ref.files[0])
					try {
						await fetch(endpoint, { method: 'POST', body })
					} catch {
						alert('Nem sikerült feltölteni! :C')
					}
				},
				uploadBudget() {
					this.upload('/budget', 'budget', this.$refs.budgetFile)
				},
				uploadConfig() {
					this.upload('/config', 'config', this.$refs.configFile)
				},
			}
		})
	</script>
</body>

</html>